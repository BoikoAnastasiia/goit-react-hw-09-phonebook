(this.webpackJsonp2_2_homework=this.webpackJsonp2_2_homework||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return _}));var r,c,u,a,o=n(3),s=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),j=Object(o.b)("auth/loginSuccess"),d=Object(o.b)("auth/loginError"),O={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(4),g=n(9),h={name:null,email:null},p=Object(o.c)(h,(r={},Object(f.a)(r,O.registerSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,O.loginSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return h})),Object(f.a)(r,O.getCurrentUserSuccess,(function(e,t){return t.payload})),r)),v=Object(o.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.loginSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),x=function(e,t){return t.payload},m=Object(o.c)(null,(u={},Object(f.a)(u,O.registerError,x),Object(f.a)(u,O.loginError,x),Object(f.a)(u,O.logoutError,x),Object(f.a)(u,O.getCurrentUserError,x),u)),k=Object(o.c)(!1,(a={},Object(f.a)(a,O.registerSuccess,(function(){return!0})),Object(f.a)(a,O.loginSuccess,(function(){return!0})),Object(f.a)(a,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(a,O.registerError,(function(){return!1})),Object(f.a)(a,O.loginError,(function(){return!1})),Object(f.a)(a,O.getCurrentUserError,(function(){return!1})),Object(f.a)(a,O.logoutSuccess,(function(){return!1})),a)),C=Object(g.c)({user:p,token:v,error:m,isAuthenticated:k}),y=n(22),S=n.n(y),E=n(33),U=n(25),A=n.n(U);A.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(e){A.a.defaults.headers.common.Authorization="Bearer ".concat(e)},w={register:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.registerRequest()),t.prev=1,t.next=4,A.a.post("/users/signup",e);case 4:r=t.sent,R(r.data.token),n(O.registerSuccess(r.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),n(O.registerError(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.logoutRequest()),e.prev=1,e.next=4,A.a.post("/users/logout");case 4:t(O.logoutSuccess()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(O.logoutError());case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.loginRequest()),t.prev=1,t.next=4,A.a.post("/users/login",e);case 4:r=t.sent,R(r.data.token),n(O.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(O.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,c,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return R(c),t(O.getCurrentUserRequest()),e.prev=5,e.next=8,A.a.get("/users/current");case 8:u=e.sent,t(O.getCurrentUserSuccess(u.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(O.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},_={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUsername:function(e){return e.auth.user.name}}},123:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),u=n(24),a=n.n(u),o=(n(76),n(11)),s=n(20),i=n(62),b=n(40),l=n(3),j=n(23),d=n(63),O=n.n(d),f=n(12),g=n(49),h=Object(b.a)(Object(l.d)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),p={key:"auth",storage:O.a,whitelist:["token"]},v=Object(l.a)({reducer:{auth:Object(j.g)(p,f.b),contacts:g.a},middleware:h}),x={store:v,persistor:Object(j.h)(v)},m=n(64),k=n(65),C=n(69),y=n(68),S=n(66),E=n.n(S),U=n(2),A=function(e){var t=e.children;return Object(U.jsxs)("div",{className:E.a.Container,children:[" ",t," "]})},R={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#018383"}};function w(){var e=Object(o.d)(f.c.getIsAuthenticated);return Object(U.jsxs)("nav",{children:[Object(U.jsx)(s.b,{to:"/",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Home page"}),e&&Object(U.jsx)(s.b,{to:"/contacts",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Contacts"})]})}var _=n.p+"static/media/default-avatar.ec148682.jpg",q=n(137),L=n(42),z=n.n(L);function M(){var e=Object(o.c)(),t=Object(o.d)(f.c.getUsername),n=Object(r.useCallback)((function(){e(f.a.logOut())}),[e]);return Object(U.jsxs)("div",{className:z.a.userMenuWrapper,children:[Object(U.jsx)("img",{src:_,alt:t,width:"32",className:z.a.userMenuAvatar}),Object(U.jsx)("span",{className:z.a.name,children:t}),Object(U.jsx)(q.a,{variant:"outlined",color:"inherit",onClick:n,children:"Logout"})]})}var T={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},I=function(){return Object(U.jsxs)("div",{children:[Object(U.jsx)(s.b,{to:"/register",exact:!0,style:T.link,activeStyle:T.activeLink,children:"Register"}),Object(U.jsx)(s.b,{to:"/login",exact:!0,style:T.link,activeStyle:T.activeLink,children:"Login"})]})};function B(){var e=Object(o.d)(f.c.getIsAuthenticated);return Object(U.jsxs)("header",{children:[Object(U.jsx)(w,{}),e?Object(U.jsx)(M,{}):Object(U.jsx)(I,{})]})}var W=n(31),N=n(41),D=n(7);function F(e){var t=e.children,n=(e.isAuthenticated,e.redirectTo),r=Object(N.a)(e,["children","isAuthenticated","redirectTo"]),c=Object(o.d)(f.c.getIsAuthenticated);return Object(U.jsx)(D.b,Object(W.a)(Object(W.a)({},r),{},{children:c?t:Object(U.jsx)(D.a,{to:n})}))}function G(e){e.isAuthenticated;var t=e.redirectTo,n=e.children,r=Object(N.a)(e,["isAuthenticated","redirectTo","children"]),c=Object(o.d)(f.c.getIsAuthenticated);return Object(U.jsx)(D.b,Object(W.a)(Object(W.a)({},r),{},{children:c&&r.restricted?Object(U.jsx)(D.a,{to:t}):n}))}var H=n(60),J=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,150))})),K=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,151))})),P=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,152))})),Q=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,153))})),V=function(e){Object(C.a)(n,e);var t=Object(y.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(U.jsxs)(A,{children:[Object(U.jsx)(B,{}),Object(U.jsx)(r.Suspense,{fallback:Object(U.jsx)(H.a,{}),children:Object(U.jsxs)(D.d,{children:[Object(U.jsx)(G,{exact:!0,path:"/",component:J}),Object(U.jsx)(G,{path:"/register",component:K,restricted:!0,redirectTo:"/contacts"}),Object(U.jsx)(G,{path:"/login",restricted:!0,component:P,redirectTo:"/contacts"}),Object(U.jsx)(F,{path:"/contacts",component:Q,redirectTo:"/login"})]})})]})}}]),n}(r.Component),X={onGetCurrentUser:f.a.getCurrentUser},Y=Object(o.b)(null,X)(V);a.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(o.a,{store:x.store,children:Object(U.jsx)(i.a,{loading:null,persistor:x.persistor,children:Object(U.jsx)(s.a,{children:Object(U.jsx)(Y,{})})})})}),document.getElementById("root"))},13:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"h",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return d}));var r=n(3),c=Object(r.b)("contacts/fetchContactsRequest"),u=Object(r.b)("contacts/fetchContactsSuccess"),a=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),l=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")},42:function(e,t,n){e.exports={userMenuAvatar:"user-menu_userMenuAvatar__2zRn8",userMenuWrapper:"user-menu_userMenuWrapper__20zpl",name:"user-menu_name__uQL2P"}},49:function(e,t,n){"use strict";var r,c,u=n(4),a=n(40),o=n(9),s=n(3),i=n(13),b=Object(s.c)([{id:"id-1",name:"Rosie Simpson",number:"459-12-56"},{id:"id-2",name:"Hermione Kline",number:"443-89-12"},{id:"id-3",name:"Eden Clements",number:"645-17-79"},{id:"id-4",name:"Annie Copeland",number:"227-91-26"}],(r={},Object(u.a)(r,i.j,(function(e,t){return t.payload})),Object(u.a)(r,i.c,(function(e,t){var n=t.payload;return[].concat(Object(a.a)(e),[n])})),Object(u.a)(r,i.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),l=Object(s.c)("",Object(u.a)({},i.d,(function(e,t){return t.payload}))),j=Object(s.c)(!1,(c={},Object(u.a)(c,i.i,(function(){return!0})),Object(u.a)(c,i.j,(function(){return!1})),Object(u.a)(c,i.h,(function(){return!1})),Object(u.a)(c,i.b,(function(){return!0})),Object(u.a)(c,i.c,(function(){return!1})),Object(u.a)(c,i.a,(function(){return!1})),Object(u.a)(c,i.f,(function(){return!0})),Object(u.a)(c,i.g,(function(){return!1})),Object(u.a)(c,i.e,(function(){return!1})),c));t.a=Object(o.c)({contacts:b,filter:l,loading:j})},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(67),c=n.n(r),u=(n(122),n(2));function a(){return Object(u.jsx)(c.a,{type:"Bars",color:"#074b79",height:20,width:50,timeout:3e3})}},66:function(e,t,n){e.exports={Container:"Container_Container__1TmgU"}},76:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.8bcab6d1.chunk.js.map